# Maintainer: GrayJack <gr41.j4ck@gmail.com>

pkgname='nipe'
pkgver=1.0.1
pkgrel=1
pkgdesc='A script to make Tor Network your default gateway.'
arch=('any')
url='https://github.com/GouveaHeitor/nipe'
license=('MIT')
depends=('tor' 'perl' 'perl-switch')
makedepends=('git')
conflicts=('nipe-git')
source=("https://github.com/GouveaHeitor/$pkgname/archive/$pkgver.tar.gz")
sha256sums=('721bb81d0460dd02d75351ab0cd1d338db3ba6dbeb2b5c5cfa1b31c89cf5fafe')

package() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    mkdir -p "$pkgdir/usr/bin"
    mkdir -p "$pkgdir/usr/share/nipe"
    install -Dm644 -t "$pkgdir/usr/share/doc/nipe/" README.md
    install -Dm644 LICENSE.md "$pkgdir/usr/share/licenses/nipe/LICENSE"
    rm README.md LICENSE.md
    cp -a * "$pkgdir/usr/share/nipe/"
    cat > "$pkgdir/usr/bin/nipe" << EOF
#!/bin/sh
cd /usr/share/nipe
exec perl nipe.pl "\${@}"
EOF

    chmod a+x "$pkgdir/usr/bin/nipe"
}
